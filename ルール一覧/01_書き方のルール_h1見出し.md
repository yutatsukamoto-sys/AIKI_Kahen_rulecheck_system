# 共通タイトル・h1見出しのルール

## 基本概念

### 用語定義
- **地域キーワード**: 集客対象エリア（店舗所在地とは異なる場合あり）
- **業種キーワード**: サービス業種を表すキーワード
- **サブキーワード**: 地域・業種の詳細キーワード
- **店舗名**: 店舗情報シートの【名称】（動的変数）
- **都道府県ルール**: 地域キーワードに都道府県名を含めるかの判定

### 動的変数
- `{地域キーワード}`: 入力された地域キーワード
- `{業種キーワード}`: 入力された業種キーワード
- `{サブキーワード}`: 入力されたサブキーワード
- `{サブキーワード}`: 入力されたサブキーワード
- `{店舗名}`: 店舗情報シートの【名称】
- `{都道府県名}`: 店舗住所の都道府県名

## 1. 都道府県ルール判定

### 基本原則
★最初に地域キーワードと店舗住所の都道府県が一致しているかを必ず確認する
h1見出しについて、地域キーワードと併せて都道府県名を記載するかどうかは下記のパターンでご判断ください。

### 都道府県名を含める場合（都道府県ルールあり）
地域キーワードが「地名(市区町村郡)・駅名・通り名・ランドマーク名など」の場合、「都道府県+地域キーワード」とする

**h1見出し例**
```
原宿(駅名)：カフェは東京都、原宿の○○ | アクセス
札幌：家具販売は北海道、札幌の○○ | アクセス
新宿：整体は東京都、新宿の○○ | アクセス
横浜：歯医者は神奈川県、横浜の○○ | アクセス
那須塩原市：葬儀は栃木県、那須塩原市の○○ | アクセス
```

### 都道府県名を含めない場合（都道府県ルールなし）
以下にあてはまる場合は都道府県対応はせず、「地域キーワード」のみとする

#### ①地域キーワードが「都道府県」の場合
**h1見出し例**
```
神奈川県：整体は神奈川県の○○ | アクセス
```

#### ②地域キーワードが「都道府県」か「市区町村郡」か判別できない（どちらとも解釈できる）場合
**h1見出し例**
```
福島：焼き鳥は福島の○○ | アクセス
栃木：カフェは栃木の○○ | アクセス
千葉：整体は千葉の○○ | アクセス
岐阜：整体は岐阜の○○ | アクセス
大阪：整体は大阪の○○ | アクセス
京都：整体は京都の○○ | アクセス
広島：整体は広島の○○ | アクセス
福岡：整体は福岡の○○ | アクセス
```

#### ③地域キーワードと店舗住所の「都道府県」が異なる場合
**h1見出し例**
```
地域キーワードが「川西」で店舗住所が「大阪府」
※「川西」は「兵庫県」：歯医者は川西の○○ | アクセス
```

#### ④地域キーワードが「地名(市区町村郡)・駅名・通り名・ランドマーク名など」がない場合
**h1見出し例**
```
オンライン：アクセサリーはオンラインの○○ | 通販
通販：エシカルファッションは通販の○○ | オンライン
```

### 補足事項
- 地域キーワードに「都」「府」「県」「市」「区」「町」「村」「郡」が抜けていても追加はしない
  ⇒クライアント様の意図やキーワード検索の効果を優先するため
- 地域キーワードがどの「都道府県」なのか分からない、または「都道府県」と「市区町村郡」どちらかが分からない場合は必ずGoogleなどで調べてから判断する

## 2. h1見出し生成

### 基本テンプレート

#### パターン1: 都道府県ルールあり（地名・駅名・通り名・ランドマーク名など）
```
{業種キーワード} + {都道府県名}「、」+ {地域キーワード} + 店舗名 | {ページ名称}
```

#### パターン2: 都道府県ルールなし（あり以外のキーワード指定）
```
{業種キーワード} + {地域キーワード} + 店舗名 | {ページ名称}
```

#### パターン3: 店舗名が長い場合
```
{業種キーワード} + {都道府県名}「、」+ {地域キーワード} + {ウリや強み}
※「｜」は使用しない、店舗名を使用しない
```

### ページ名称の決定ルール

#### 基本ルール
①原則としてページ名称は「ページ構成」シートの「ページ名 (1行目)」の表記とする
※C列の項目が既存の場合：F列の既存URLにアクセスし、サイトのページ内容を参考に「ページ名」を設定
※備考や録音などにてクライアント様のご要望がある場合：ご要望される「ページ名」とする

#### 文字数制限による調整

##### 40字を超える場合
以下の定型文を適用し、ページに合った打ち出しをそれぞれ作成する
(1箇所でも未達があればすべての見出しで以下定型で執筆する必要があるが、打ち出しは統一しない)
```
{業種キーワード} + {都道府県名}「、」+ {地域キーワード} + ページにあった打ち出し | {ページ名}
```

##### 20文字未満になる場合
以下の定型文を適用し、ページに合った打ち出しをそれぞれ作成する
(1箇所でも未達があればすべての見出しで以下定型で執筆する必要があるが、打ち出しは統一しない)
```
{業種キーワード} + {都道府県名}「、」+ {地域キーワード} + ページにあった打ち出し + 店舗名 | {ページ名}
```

#### パターン4: 複数店舗（同一店舗名の場合）
```
使用する名前：同一店舗名（ブランド名のみ）
ルール：支店名は出さず、ブランド全体を表す名称を使う

例：
・地域キーワード：渋谷
・業種キーワード：ジム
・店舗1：コナミスポーツクラブ 池袋
・店舗2：コナミスポーツクラブ 恵比寿
・同一店舗名：コナミスポーツクラブ

【可変】h1見出し：
ジムは東京都、渋谷のコナミスポーツクラブ | 初心者から上級者まで対応
```

#### パターン5: 複数店舗（同一店舗名以外の場合）
```
同一店舗以外
①「〇〇店」「（地域キーワード）」以外にも一部の名称が異なる場合
②名称がまったく異なる場合

例：
・地域キーワード：渋谷
・業種キーワード：ジム
・店舗1：ネクストジム TOKYO
・店舗2：FASTORY ラボ

【可変】h1見出し
使用する名前：基本は店舗1の店舗名
ルール：SEO対策用の見出しも店舗1を採用

例：
ジムは東京都、渋谷のネクストジム TOKYO | 初心者から上級者まで対応
```

### 制約条件
- {サブ地域キーワード}に拠点なし→「周辺の」追加必須
- {地域キーワード}・{業種キーワード}は左詰め必須
- 固定ページは全箇所統一不要



## 3. 実装時の判定フロー

### Step 1: 都道府県ルール判定
1. {地域キーワード}の種類を特定
2. 市区町村郡・駅名・通り名・ランドマーク名 → 都道府県ルールあり
3. 都道府県名・その他 → 都道府県ルールなし
4. 判定結果に基づきテンプレート選択

### Step 2: 店舗名決定
1. 複数店舗か単一店舗か判定
2. 同一ブランドか異なるブランドか判定
3. 使用する{店舗名}を決定

### Step 3: h1見出し生成
1. 都道府県ルールの適用確認
2. 店舗名の長さ確認
3. 適切なテンプレート適用

### Step 4: 例外処理
1. 拠点なし地域の「周辺の」追加
2. 文字数超過時の調整
3. 重複表現の回避

## 4. エラー回避チェックリスト
- [ ] {地域キーワード}の種類判定（市区町村郡・駅名・通り名・ランドマーク名等）
- [ ] 市区町村郡等 → 都道府県ルールありの適用
- [ ] 都道府県名等 → 都道府県ルールなしの適用
- [ ] 複数店舗時の店舗名選択（同一ブランド名 vs 異なるブランド名）
- [ ] 店舗名の長さ確認
- [ ] 文字数制限内での生成
- [ ] テンプレートの適切な選択
- [ ] 重複表現の回避

## 5. 動的変数の実装例

### 入力データ例
```json
{
  "地域キーワード": "渋谷",
  "業種キーワード": "カフェ",
  "サブ地域キーワード": "恵比寿",
  "サブ業種キーワード": "コーヒー",
  "店舗名": "スターバックス 渋谷店",
  "都道府県名": "東京都"
}
```

### 生成結果例
```
h1見出し: カフェは東京都、渋谷のスターバックス 渋谷店 | コーヒーでリラックス


